<!--index.wxml-->

<view class="container" scroll-y="{{isScroll}}">
    <!--弹层男女选择-->
    <view hidden="{{!isShowGenderView}}" class="{{boyid || girlid? 'fix_view_hidden':'fix_view'}}">
        <view class="{{boyid || girlid? 'choose_top_hidden':'choose_view_top'}}">
            <view class="{{boyid || girlid? 'choose_view_hidden':'choose_view'}}">
                <image class="choose_view_img" src="../../images/edition/rectangle.png"></image>
            </view>
            <view class="{{boyid || girlid? 'icon_image_hidden':'icon_image'}}">
                <image src="../../images/edition/boy_org.png"></image>
            </view>
            <view class="{{boyid || girlid? 'bg_view_hidden':'bg_view'}}">
                <view class="{{boyid || girlid? 'boy_view_hidden':'boy_view'}}">
                    <block wx:if="{{isBoy}}}">
                        <view style="{{isBoy === true ? 'display:block':'display:none'}}">
                            <image class="boy_s" src="../../images/edition/Rectangle_w.png"></image>
                            <image class="boy_btn" data-index="0" src="../../images/edition/CShape_bactive.png"></image>
                        </view>
                        <view style="{{isBoy === true ? 'display:none':'display:block'}}">
                            <image class="{{idsed === 3?'hidden_b':'boy_s'}}" src="../../images/edition/Rectangle_s.png"></image>
                            <image class="{{isGirl === true ? 'boy_btn_hidden':'boy_btn'}}" data-index="0" src="../../images/edition/CShape_b.png"
                                   catchtap="onBoyTap"></image>
                        </view>
                    </block>
                    <view style="{{isGirl === true ? 'display:block;':'display:none;'}}">
                        <image class="boy_s" src="../../images/edition/Rectangle_k.png"></image>
                        <image class="boy_btn" data-index="0" src="../../images/edition/CShape_b.png" ></image>
                    </view>
                </view>

                <view class="{{boyid || girlid? 'girl_view_hidden':'girl_view'}}">

                    <view style="{{isBoy === true ? 'display:block;':'display:none;'}}">
                        <image class="girl_s" src="../../images/edition/girl_k.png"></image>
                        <image class="girl_btn" data-index="1" src="../../images/edition/CShape_g.png" ></image>
                    </view>
                    <view style="{{isBoy ===  true || idsed === 3? 'display:none;':'display:block;'}}">
                        <image class="{{idsed === 3?'hidden_s':'girl_s'}}" src="../../images/edition/girl_s.png"></image>
                        <image class="{{isGirl === true ? 'girl_btn_hidden':'girl_btn'}}" data-index="1" src="../../images/edition/CShape_g.png"
                               catchtap="onGirlTap"></image>
                    </view>
                    <block wx:if="{{isGirl}}">
                        <view style="{{isGirl === true}}">
                            <image class="girl_s" src="../../images/edition/girl_w.png"></image>
                            <image class="girl_btn" data-index="1" src="../../images/edition/CShape_gative.png"></image>
                        </view>
                    </block>
                </view>
            </view>

            <view class="{{boyid || girlid? 'logo_view_hidden':'logo_view'}}">
                <image class="logo_logo" src="../../images/edition/logo.png"></image>
            </view>
        </view>
    </view>
    <!--toast-->
    <view id="{{isToast ? 'toast':'toast_hidden'}}" catchtouchmove='noScrollMove'></view>
    <view class="{{isToast ? 'toast_img':'toast_img_hidden'}}" catchtouchmove='noScrollMove'>
        <view class="toast_view">
            <image class="toast_images" src="../../images/toast.png"></image>
            <view class="toast_word">正在加载中...</view>
        </view>
    </view>

    <view class="content_view" wx:if="{{networkType === true}}">
        <view class="con_banner">
            <!--search搜索-->
            <!--搜索框聚焦时显示-->
            <view class="{{isOpacity? 'search_view_show':'search_view'}}">
                <view class="search_img"
                      style="{{isOpacity === true? 'background:rgba(245,245,245,1);border-radius: 30rpx;-webkit-border-radius: 30rpx;-moz-border-radius: 30rpx;-mz-border-radius: 30rpx;':''}}">
                    <image class="search_images" src="{{isOpacity === true ? '../../images/search_gray_02.png':'../../images/search_gray.png'}}"></image>
                    <input class="{{isOpacity === true?'search_input_focus':'search_input'}}" type="text" value="{{word}}"
                           placeholder="搜索作品或作者名称" placeholder-style="color:{{isOpacity?'#ccc':'#fff'}};font-size:28rpx;"
                           bindfocus="focusInputEvent" bindinput="bindInputChange"/>
                    <block wx:if="{{word!==''}}">
                        <image class="del"
                               src="../../images/delete.png"></image>
                        <view class="bg_del"
                              catchtap="onDel"></view>
                    </block>
                    <block wx:if="{{word ===''}}">
                        <image class="del_hidden"
                               src="../../images/delete.png"></image>
                        <view class="{{word? 'bg_del':'bg_del_hidden'}}"
                              catchtap="onDel"></view>
                    </block>

                    <view class="{{isOpacity?'qx_view':'qx_view_hidden'}}}" catchtap="onCancel">取消</view>
                    <block wx:if="{{boyid}}">
                        <image class="{{isOpacity || id !== 0? 'boy_img_hidden':'boy_img'}}" data-index="{{boyid}}"
                               src="../../images/boy.png" catchtap="onToastTap" data-id="{{id}}"></image>
                        <image class="{{id === 0 || isOpacity === true ? 'girl_img_hidden':'girl_img'}}" data-index="{{girlid}}"
                               src="../../images/girl.png" catchtap="onToastTap" data-id="{{id}}"></image>
                    </block>
                    <block wx:elif="{{girlid}}">
                        <image class="{{isOpacity || idg !== 1? 'girl_img_hidden':'girl_img'}}" data-index="{{girlid}}"
                               src="../../images/girl.png" catchtap="onToastTap" data-id="{{idg}}"></image>
                        <image class="{{idg === 1 || isOpacity === true? 'boy_img_hidden':'boy_img'}}" data-index="{{boyid}}"
                               src="../../images/boy.png" catchtap="onToastTap" data-id="{{idg}}"></image>
                    </block>

                </view>
            </view>
            <!--banner图-->
            <view class="banner" id="haha">
                <block wx:if="{{imgUrls.length>1}}">
                    <swiper indicator-dots="{{indicatorDots}}"
                            autoplay="{{autoplay}}" interval="{{interval}}" duration="{{duration}}" indicator-color ="{{indicatorColor}}"
                            indicator-active-color ="{{indicatorActiveColor}}" circular="{{circular}}" vertical ="{{vertical}}">
                        <block wx:for="{{imgUrls}}" wx:key="index">
                            <swiper-item>
                                <image class="slide-image" src="../../images/banner_bitmap.png"
                                       style="position: relative;left: 0;top: 0;">
                                    <image src="{{item.image_ext_url}}" data-typeid="{{item.object_id}}" class="slide-image"
                                           catchtap="swipTap" style="position: absolute;left: 0;top: 0;"></image>
                                </image>
                            </swiper-item>
                        </block>
                    </swiper>
                </block>

                <block wx:else>
                    <swiper>
                        <block wx:for="{{imgUrls}}" wx:key="index">
                            <swiper-item>
                                <image class="slide-image" src="../../images/banner_bitmap.png"
                                       style="position: relative;left: 0;top: 0;">
                                    <image src="{{item.image_ext_url}}" data-typeid="{{item.object_id}}" class="slide-image"
                                           catchtap="swipTap" style="position: absolute;left: 0;top: 0;"></image>
                                </image>
                            </swiper-item>
                        </block>
                    </swiper>
                </block>

            </view>
        </view>


        <view class="fine_works" wx:if="{{FineWorks.length > 0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_f}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <!--img+content 图片区域内容可滑动-精品佳作-->
        <scroll-view class="scroll_view" scroll-x="{{true}}" wx:if="{{FineWorks.length > 0}}">
            <view style="width: {{windowWidth}}">
                <block wx:if="{{FineWorks}}" wx:for="{{FineWorks}}" wx:key="index">
                    <navigator class="big_img" url="../details/details?comic_id={{item.extra.comic_id}}"
                               style="position: relative;top: 0;left: 0;">
                        <image mode="aspectFill" src="../../images/hcover.png">
                            <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}"
                                   style="position: absolute;left: 0;top: 0;z-index: 1;"></image>
                        </image>
                        <view class="word_info">
                            <text class="name_name">{{item.extra.name}}</text>
                            <text class="name_info">{{item.extra.watching_focus}}</text>
                        </view>
                    </navigator>
                </block>
            </view>
        </scroll-view>
        <view class="bg_more" wx:if="{{FineWorks.length > 0}}" catchtap="bindMoreTap" data-index="{{keyIndex_f}}"
              data-title="{{title_f}}"><text>查看更多</text></view>

        <view class="hot_works" wx:if="{{PopularWorks.length >0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_p}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <!--img+content 人气作品-->
        <view class="hot_view">
            <block wx:for="{{PopularWorks}}" wx:key="index">
                <navigator class="hot_img" url="../details/details?comic_id={{item.extra.comic_id}}">
                    <image mode="aspectFill" src="../../images/hcover.png"
                           style="position: relative;top: 0;left: 0;">
                        <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}" style="position: absolute;top: 0;left: 0;"></image>
                    </image>
                    <view class="word_info">
                        <text class="name_name">{{item.extra.name}}</text>
                        <text class="name_info">{{item.extra.watching_focus}}</text>
                    </view>
                </navigator>
            </block>
        </view>
        <view class="bg_more" wx:if="{{PopularWorks.length >0}}" catchtap="bindMoreTap" data-index="{{keyIndex_p}}"
              data-title="{{title_p}}">查看更多</view>
        <!--最新上架-->
        <view class="new_works" wx:if="{{newArrivalWorks.length > 0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_n}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <view class="new_view">
                <view class="big_new_view">
                    <block wx:for="{{newArrivalWorks}}" wx:key="index">
                        <navigator class="new_img" url="../details/details?comic_id={{item.extra.comic_id}}">
                            <image mode="aspectFill" src="../../images/hcover.png"
                            style="position: relative;top: 0;left: 0;">
                                <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}"
                                style="position: absolute;left: 0;top: 0;"></image>
                            </image>
                            <view class="word_info">
                                <text class="name_name">{{item.extra.name}}</text>
                                <text class="name_info">{{item.extra.watching_focus}}</text>
                            </view>
                        </navigator>
                    </block>
                </view>
        </view>
        <view class="bg_more" wx:if="{{newArrivalWorks.length > 0}}" catchtap="bindMoreTap" data-index="{{keyIndex_n}}"
              data-title="{{title_n}}">查看更多</view>
        <!--热门连载-->
        <view class="hot_works" wx:if="{{hotSerialWorks.length > 0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_h}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <!--img+content 图片区域内容-->
        <view class="hot_view">
            <block wx:for="{{hotSerialWorks}}" wx:key="index">
                <navigator class="hot_img" url="../details/details?comic_id={{item.extra.comic_id}}">
                    <image mode="aspectFill" src="../../images/hcover.png"
                    style="position: relative;top: 0;left: 0;;">
                        <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}"
                        style="position: absolute;left: 0;top: 0;"></image>
                    </image>
                    <view class="word_info">
                        <text class="name_name">{{item.extra.name}}</text>
                        <text class="name_info">{{item.extra.watching_focus}}</text>
                    </view>
                </navigator>
            </block>
        </view>
        <view class="bg_more" wx:if="{{hotSerialWorks.length > 0}}" catchtap="bindMoreTap" data-index="{{keyIndex_h}}"
              data-title="{{title_h}}">查看更多</view>
        <!--小编推荐-->
        <view class="new_works" wx:if="{{xiaobianRecommend.length > 0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_x}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <view class="new_view">
            <view class="big_new_view">
                <block wx:for="{{xiaobianRecommend}}" wx:key="index">
                    <navigator class="new_img" url="../details/details?comic_id={{item.extra.comic_id}}">
                        <image mode="aspectFill" src="../../images/hcover.png"
                               style="position: relative;top: 0;left: 0;;">
                            <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}"
                                   style="position: absolute;left: 0;top: 0;"></image>
                        </image>
                        <view class="word_info">
                            <text class="name_name">{{item.extra.name}}</text>
                            <text class="name_info">{{item.extra.watching_focus}}</text>
                        </view>
                    </navigator>
                </block>
            </view>
        </view>
        <view class="bg_more" wx:if="{{xiaobianRecommend.length > 0}}" catchtap="bindMoreTap" data-index="{{keyIndex_x}}"
              data-title="{{title_x}}">查看更多</view>
        <!--img+content 本周推荐-->
        <view class="hot_works" wx:if="{{weekRecommend.length > 0}}">
            <view class="border"></view>
            <view class="fine_text">{{title_w}}</view>
            <view class="border" style="margin-left: 10rpx;"></view>
        </view>
        <view class="hot_view">
            <block wx:for="{{weekRecommend}}" wx:key="index">
                <navigator class="hot_img" url="../details/details?comic_id={{item.extra.comic_id}}">
                    <image mode="aspectFill" src="../../images/hcover.png"
                           style="position: relative;top: 0;left: 0;;">
                        <image mode="scaleToFill" lazy-load="true" src="{{item.image_ext_url}}"
                               style="position: absolute;left: 0;top: 0;"></image>
                    </image>
                    <view class="word_info">
                        <text class="name_name">{{item.extra.name}}</text>
                        <text class="name_info">{{item.extra.watching_focus}}</text>
                    </view>
                </navigator>
            </block>
        </view>
        <view class="bg_more" wx:if="{{weekRecommend.length > 0}}" catchtap="bindMoreTap" data-index="{{keyIndex_w}}"
              data-title="{{title_w}}">查看更多</view>
        <!--滑动到底部没有数据了提示-->
        <view class="{{imgUrls.length>0?'bottom_img':'bottom_img_hidden'}}">
            <view>下面没有了QAQ</view>
        </view>
    </view>

    <!--蒙层-->
    <view class="{{isOpacity? 'layer' :'layer_n'}}" catchtouchmove='noScrollMove' catchtap="blurInputEvent"></view>
    <!--根据搜索结果渲染数据-->
    <scroll-view class="{{isCancel===true?'big_listdata':'big_listdata_bloc'}}" wx:if="{{searchList&&searchList.length>0}}"
                 enable-back-to-top="true" scroll-y="{{true}}" bindscrolltolower="lower"
                 lower-threshold="{{50}}" scroll-with-animation="true">
        <block wx:for="{{searchList}}" wx:key="{{index}}">
            <searchlist
                class="searchlist"
                idx="{{item.comic_id}}"
                src="{{item.cover}}"
                name="{{item.name}}"
                artists="{{item.sina_nickname}}"
                cates="{{item.cates}}"
            ></searchlist>
        </block>
        <view class="load_view">
            <view class="load_img_bg" wx:if="{{ message != '没有更多了' }}">
                <image class="load_image" src="../../images/icon_load.png"></image>
            </view>
            <view class="comment_message">{{message}}</view>
        </view>
    </scroll-view>
    <!--搜索没有结果提示loading-->
    <block wx:if="{{noSearch === false}}">
        <view class="bg_search_mess" catchtouchmove='noScrollMove'>
            <message class="{{isCancel===true? 'search_message_hidden':'search_message'}}" modal="{{false}}" type="search"></message>
        </view>
    </block>

    <import src="./template/message.wxml"></import>
    <template is="message" data="{{networkType,isLoad}}"></template>

    <!-- 网络慢提示loading -->
    <import src="/tpls/message.wxml"/>
    <view wx:if="{{!isLoad}}" style="position: absolute;top: 0;left: 0;width:100%;background-color:#fff;color:#999;z-index:99;">
        <template is="message" wx:if="{{type}}" data="{{ type }}"/>
    </view>
</view>

